<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tafelzoeker – Jani & Zalissa</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #fdf8f4;
  --accent: #c97b7b;
  --text: #3f3f3f;
}

* {
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body {
  font-family: 'Quicksand', sans-serif;
  background: var(--bg);
  color: var(--text);
  scroll-behavior: smooth;
}

/* =================== HEADER =================== */
header {
  height: 100vh;
  background: linear-gradient(to top, rgba(0,0,0,0.4), rgba(0,0,0,0.2)), url('Foto1.jpg') center/cover no-repeat;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  color: white;
  padding: 2rem;
  position: relative;
}

header::before {
  content: "";
  position: absolute;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.25);
  z-index: 1;
}

/* =================== TITLE BOX =================== */
.title-box {
  position: sticky;
  top: 10px;
  margin: 0 auto;
  width: 90%;
  max-width: 500px;
  z-index: 2;
  background: rgba(255,255,255,0.15);
  padding: 1rem 1.5rem;
  border-radius: 20px;
  text-align: center;
  animation: fadeIn 1.2s ease forwards;
  transition: top 0.5s ease, transform 0.5s ease;
}

/* =================== TITLE =================== */
header h1 {
  font-family: 'Great Vibes', cursive;
  font-size: 3.5rem;
  color: var(--accent);
  text-shadow: 3px 3px 8px rgba(0,0,0,0.5);
}

/* =================== MAIN =================== */
main {
  max-width: 600px;
  margin: 20px auto 2rem;
  padding: 0 1rem;
  position: relative;
  z-index: 1;
}

.search-card {
  background: rgba(255, 255, 255, 0.92);
  padding: 2.5rem;
  border-radius: 20px;
  box-shadow: 0 15px 30px rgba(0,0,0,0.15);
  text-align: center;
  transform: translateY(50px);
  opacity: 0;
  transition: all 0.6s ease-in-out;
  will-change: transform;
  position: relative;
}

.search-card.show {
  transform: translateY(0);
  opacity: 1;
  animation: glow 3s ease-in-out infinite alternate;
}

.search-card h2 {
  background: none;
  padding: 0;
  margin-bottom: 1rem;
  font-size: 2rem;
  color: var(--accent);
  font-family: 'Great Vibes', cursive;
}

.search-card input {
  padding: 14px 20px;
  width: 100%;
  max-width: 400px;
  border-radius: 12px;
  border: 2px solid var(--accent);
  font-size: 1.1rem;
  outline: none;
  position: relative;
  z-index: 5;
}

.search-card button {
  margin-top: 1rem;
  padding: 12px 24px;
  border: none;
  border-radius: 12px;
  background: var(--accent);
  color: white;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.search-card button:hover {
  background: #a45757;
  transform: scale(1.05);
}

#resultaat {
  margin-top: 1rem;
  font-size: 1.3rem;
  font-weight: bold;
  color: var(--accent);
  opacity: 0;
  transition: opacity 0.5s ease-in-out, transform 0.3s ease-in-out;
  transform: translateY(10px);
}

#resultaat.show {
  opacity: 1;
  transform: translateY(0);
}

.suggestions {
  margin-top: 2px;
  text-align: left;
  max-height: 150px;
  overflow-y: auto;
  background: rgba(255,255,255,0.95);
  border: 2px solid var(--accent);
  border-top: none;
  border-radius: 0 0 12px 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  padding: 0.5rem;
  display: none;
  opacity: 0;
  transition: opacity 0.4s ease;
  width: 100%;
  max-width: 400px;
  position: absolute;
  z-index: 10;
}

.suggestions.show {
  display: block;
  opacity: 1;
}

.suggestions div {
  padding: 8px 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  border-radius: 6px;
}

.suggestions div:hover {
  background: var(--accent);
  color: white;
  transform: translateX(3px);
}

.back-link {
  margin-top: 1.5rem;
  font-size: 0.95rem;
  color: var(--accent);
  text-align: center;
}

.back-link a {
  color: var(--accent) !important;
  text-decoration: none;
  font-weight: 600;
}

.back-link a:hover {
  text-decoration: underline;
}

/* =================== RESULT BOX =================== */
.result-box {
  background: rgba(201,123,123,0.1);
  border: 2px solid var(--accent);
  border-radius: 12px;
  padding: 15px 20px;
  font-size: 1.3rem;
  color: var(--accent);
  font-weight: 600;
  text-align: center;
  box-shadow: 0 8px 20px rgba(201,123,123,0.3);
  transition: all 0.4s ease;
}

.result-box p {
  margin: 5px 0;
}

.result-box strong {
  color: var(--accent);
  font-size: 1.4rem;
}

/* =================== ANIMATIE RESULT =================== */
@keyframes resultFadeScale {
  0% { opacity: 0; transform: scale(0.8); }
  100% { opacity: 1; transform: scale(1); }
}

.animate-result {
  animation: resultFadeScale 0.5s ease forwards;
}

/* =================== PRAKTISCHE INFO =================== */
.info-toggle {
  position: relative;
  margin: 40px auto 20px;
  max-width: 220px;
  padding: 12px 18px;
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid var(--accent);
  border-radius: 18px;
  font-family: 'Great Vibes', cursive;
  font-size: 1.6rem;
  color: var(--accent);
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  transition: all 0.3s ease;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  backdrop-filter: blur(6px);
  white-space: nowrap;
  z-index: 1;
}

.info-toggle:hover {
  background: rgba(255,255,255,1);
  transform: scale(1.05);
}

#arrow {
  font-size: 1.2rem;
  transition: transform 0.3s ease;
}

.info-box-collapsible {
  max-width: 800px;
  margin: 0 auto 80px;
  padding: 0 20px;
  background: rgba(255,255,255,0.70);
  border-left: 4px solid var(--accent);
  border-radius: 0 0 16px 16px;
  box-shadow: 0 8px 22px rgba(0,0,0,0.1);
  line-height: 1.55;
  font-size: 0.98rem;
  color: #444;
  backdrop-filter: blur(4px);

  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transform: translateY(-10px);
  transition: max-height 0.6s ease, padding 0.4s ease,
             opacity 0.6s ease, transform 0.6s ease;
}

.info-box-collapsible.open {
  padding: 20px 28px;
  max-height: 500px;
  opacity: 1;
  transform: translateY(0);
}

.info-box-collapsible .groetjes {
  margin-top: 1rem;
  font-style: italic;
  text-align: right;
  color: var(--accent);
}

/* =================== ANIMATIES =================== */
@keyframes fadeIn {
  from {opacity:0; transform: translateY(20px);}
  to {opacity:1; transform: translateY(0);}
}

@keyframes glow {
  0% { box-shadow: 0 15px 30px rgba(0,0,0,0.15); }
  50% { box-shadow: 0 15px 40px rgba(201,123,123,0.4); }
  100% { box-shadow: 0 15px 30px rgba(0,0,0,0.15); }
}

/* =================== RESPONSIVE =================== */
@media (max-width:768px){
  header h1 { font-size: 2.2rem; }
  .title-box { padding: 0.8rem 1rem; }
  .search-card h2 { font-size: 1.8rem; }
  .search-card { padding: 2rem 1rem; }
  .info-toggle { font-size: 1.4rem; }
}
</style>
</head>

<body>

<header>
  <div class="title-box">
    <h1>Find Your Seat</h1>
  </div>
</header>

<main>
  <div class="search-card" id="searchCard">
    <h2>Vul je naam in</h2>
    <input id="naamInput" type="text" placeholder="Typ hier je voornaam + naam" oninput="showSuggestions()" autocomplete="off">
    <div class="suggestions" id="suggestions"></div>

    <button onclick="zoekPersoon()">Zoek je tafel</button>
    <div id="resultaat" role="status" aria-live="polite"></div>

    <div class="back-link">
      <a href="https://j-swb.github.io/trouwsiteJaniZalissa/" target="_blank">
        Klik hier voor de volledige tafelschikking
      </a>
    </div>
  </div>
</main>

<div class="info-toggle" onclick="toggleInfoBox()">
  <span class="icon">❤</span>
  <span>Praktische info</span>
  <span id="arrow">▼</span>
</div>

<div class="info-box-collapsible" id="infoBox" aria-expanded="false">
  <p>All you can eat streetfood tussen <strong>19u en 21u</strong>. Daarna volgt het dessertbuffet.</p>
  <p>Je hoeft je niet strikt aan je tafel te houden. Je mag gerust eens aan een andere tafel aanschuiven, of bij mooi weer buiten eten.</p>
  <p>De openingsdans is voorzien rond <strong>22u30</strong>, gelieve dan binnen te zijn.</p>
  <p class="groetjes">Met veel liefs, Jani & Zalissa</p>
</div>

<script>
// ================= SEARCH CARD ANIMATION =================
const searchCard = document.getElementById('searchCard');
window.addEventListener('scroll', () => {
  const rect = searchCard.getBoundingClientRect();
  if(rect.top < window.innerHeight - 100){
    searchCard.classList.add('show');
  }
});

// ================= GASTEN =================
const gasten = [
    { naam: "Carine Van Belleghem", tafel: 1 },
    { naam: "Chris Becue", tafel: 1 },
    { naam: "Jani Swimberghe", tafel: 1 },
    { naam: "Johan Swimberghe", tafel: 1 },
    { naam: "Katrien Barremaecker", tafel: 1 },
    { naam: "Zalissa Vanhauter", tafel: 1 },
    { naam: "Brecht Velle", tafel: 2 },
    { naam: "Celine Steyaert", tafel: 2 },
    { naam: "Charlotte Carrette", tafel: 2 },
    { naam: "Joey De Queecker", tafel: 2 },
    { naam: "Nicky Bruneel", tafel: 2 },
    { naam: "Sylvie Steyaert", tafel: 2 },
].sort((a,b) => a.naam.localeCompare(b.naam));

function levenshtein(a,b){
  a=a.toLowerCase(); b=b.toLowerCase();
  const matrix=Array(b.length+1).fill(null).map(()=>Array(a.length+1).fill(0));
  for(let i=0;i<=a.length;i++) matrix[0][i]=i;
  for(let j=0;j<=b.length;j++) matrix[j][0]=j;
  for(let j=1;j<=b.length;j++){
    for(let i=1;i<=a.length;i++){
      if(a[i-1]===b[j-1]) matrix[j][i]=matrix[j-1][i-1];
      else matrix[j][i]=Math.min(matrix[j-1][i]+1,matrix[j][i-1]+1,matrix[j-1][i-1]+1);
    }
  }
  return matrix[b.length][a.length];
}

function vergelijkNamen(inputNaam,gastNaam){
  const inputDelen=inputNaam.split(" ");
  const gastDelen=gastNaam.split(" ");
  let totaleScore=0;
  inputDelen.forEach(invoerWoord=>{
    let beste=Infinity;
    gastDelen.forEach(gastWoord=>{
      const score=levenshtein(invoerWoord,gastWoord);
      if(score<beste) beste=score;
    });
    totaleScore+=beste;
  });
  return totaleScore;
}

function zoekPersoon(){
  const input=document.getElementById("naamInput").value.trim().replace(/\s+/g," ");
  const resultaat=document.getElementById("resultaat");
  resultaat.classList.remove("show");

  if(!input){
    resultaat.textContent="Voer een naam in.";
    resultaat.classList.add("show");
    return;
  }

  let besteMatch=null;
  let besteScore=999;

  gasten.forEach(gast=>{
    const score=vergelijkNamen(input.toLowerCase(),gast.naam.toLowerCase());
    if(score<besteScore){
      besteScore=score;
      besteMatch=gast;
    }
  });

  const drempel=Math.ceil(input.replace(/\s/g,"").length * 0.4);

  if(besteScore <= drempel){
    const voornaam = besteMatch.naam.split(" ")[0];
    resultaat.innerHTML = `
      <div class="result-box">
        <p>Welkom <strong>${voornaam}</strong>!</p>
        <p>Je zit aan tafel <strong>${besteMatch.tafel}</strong>.</p>
      </div>
    `;
    const box = resultaat.querySelector('.result-box');
    if(box){
      box.classList.add('animate-result');
    }
  } else {
    resultaat.textContent="Naam niet gevonden. Probeer opnieuw.";
  }

  resultaat.classList.add("show");
}

function showSuggestions(){
  const input=document.getElementById("naamInput").value.trim().toLowerCase();
  const suggestionBox=document.getElementById("suggestions");
  suggestionBox.innerHTML="";
  suggestionBox.classList.remove("show");
  if(!input){
    suggestionBox.style.display="none";
    return;
  }
  const matches=gasten.filter(g=>g.naam.toLowerCase().includes(input));
  matches.forEach(match=>{
    const div=document.createElement("div");
    div.textContent=match.naam;
    div.onclick=()=>{
      document.getElementById("naamInput").value=match.naam;
      suggestionBox.style.display="none";
      suggestionBox.classList.remove("show");
    };
    suggestionBox.appendChild(div);
  });
  if(matches.length){
    suggestionBox.style.display="block";
    setTimeout(()=>suggestionBox.classList.add("show"),50);
  } else {
    suggestionBox.style.display="none";
  }
}

document.getElementById("naamInput").addEventListener("blur", () => {
  setTimeout(()=>{
    const suggestionBox=document.getElementById("suggestions");
    suggestionBox.style.display="none";
    suggestionBox.classList.remove("show");
  }, 200);
});

function toggleInfoBox(scroll = true) {
  const box = document.getElementById("infoBox");
  const arrow = document.getElementById("arrow");

  const opening = !box.classList.contains("open");
  box.classList.toggle('open');
  box.setAttribute('aria-expanded', opening);

  arrow.style.transform = opening ? "rotate(180deg)" : "rotate(0deg)";

  if (opening && scroll) {
    setTimeout(() => {
      box.scrollIntoView({ behavior: "smooth", block: "center" });
    }, 350);
  }
}
</script>

</body>
</html>

